"use strict";(self.webpackChunksapa_site_2=self.webpackChunksapa_site_2||[]).push([[687],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return g}});var s=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,s,a=function(e,t){if(null==e)return{};var n,s,a={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=s.createContext({}),c=function(e){var t=s.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=c(e.components);return s.createElement(i.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return s.createElement(s.Fragment,{},t)}},m=s.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),m=c(n),g=a,d=m["".concat(i,".").concat(g)]||m[g]||p[g]||r;return n?s.createElement(d,l(l({ref:t},u),{},{components:n})):s.createElement(d,l({ref:t},u))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=m;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var c=2;c<r;c++)l[c]=n[c];return s.createElement.apply(null,l)}return s.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4164:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return i},default:function(){return g},frontMatter:function(){return o},metadata:function(){return c},toc:function(){return p}});var s=n(7462),a=n(3366),r=(n(7294),n(3905)),l=["components"],o={sidebar_position:7},i="Messaging System",c={unversionedId:"tutorial-basics/messaging-system",id:"tutorial-basics/messaging-system",title:"Messaging System",description:"sapa has a simple event system for sending messages between objects.",source:"@site/docs/tutorial-basics/messaging-system.md",sourceDirName:"tutorial-basics",slug:"/tutorial-basics/messaging-system",permalink:"/docs/tutorial-basics/messaging-system",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tutorial-basics/messaging-system.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"DOM Event Handler",permalink:"/docs/tutorial-basics/dom-event-system"},next:{title:"Manage Docs Versions",permalink:"/docs/tutorial-extras/manage-docs-versions"}},u={},p=[{value:"SUBSCRIBE",id:"subscribe",level:3},{value:"emit",id:"emit",level:3},{value:"multiple SUBSCRIBE",id:"multiple-subscribe",level:3},{value:"DEBOUNCE",id:"debounce",level:3},{value:"THROTTLE",id:"throttle",level:3},{value:"IF",id:"if",level:4},{value:"trigger",id:"trigger",level:3},{value:"SUBSCRIBE_SELF",id:"subscribe_self",level:3}],m={toc:p};function g(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,s.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"messaging-system"},"Messaging System"),(0,r.kt)("p",null,"sapa has a simple event system for sending messages between objects."),(0,r.kt)("p",null,"This also uses ",(0,r.kt)("inlineCode",{parentName:"p"},"method")," string, just like specifying a DOM event."),(0,r.kt)("h3",{id:"subscribe"},"SUBSCRIBE"),(0,r.kt)("p",null,"SUBSCRIBE allows you to receive emit messages from elsewhere. "),(0,r.kt)("p",null,"Provides a callback to send and receive messages even if they are not connected."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"\nclass A extends UIElement {\n    [SUBSCRIBE('setLocale')] (locale) {\n        console.log(locale);\n    }\n}\n\nclass B extends UIElement {\n    template () {\n        return `<button type=\"button\">Click</button>`\n    }\n\n    [CLICK()] () {\n        this.emit('setLocale', 'ko')\n    }\n}\n\nApp.start({\n    components : {\n        A, B\n    },\n    template : `\n        <div>\n            <A />\n            <B />\n        </div>\n    `\n})\n\n")),(0,r.kt)("h3",{id:"emit"},"emit"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"emit")," is a method that delivers a message to an object other than itself."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"[CLICK()] () {\n    this.emit('setLocale', 'ko')\n}\n")),(0,r.kt)("p",null,"why does not it send to its element?"),(0,r.kt)("p",null,"The reason for not sending to itself is that there is a possibility that the event can run infinitely. Once I send the message, I can not come back to me."),(0,r.kt)("h3",{id:"multiple-subscribe"},"multiple SUBSCRIBE"),(0,r.kt)("p",null,"SUBSCRIBE can define several at the same time."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"\n[SUBSCRIBE('a', 'b', 'c')] () {\n    // \n}\n\n// this.emit('a')\n// this.emit('b')\n// this.emit('c')\n\n")),(0,r.kt)("h3",{id:"debounce"},"DEBOUNCE"),(0,r.kt)("p",null,"You can also slow down the execution time of a message."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"\n[SUBSCRIBE('a') + DEBOUNCE(100)] () {\n\n}\n\n")),(0,r.kt)("h3",{id:"throttle"},"THROTTLE"),(0,r.kt)("p",null,"You can also slow down the execution time of a message."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"\n[SUBSCRIBE('a') + THROTTLE(100)] () {\n\n}\n\n")),(0,r.kt)("h4",{id:"if"},"IF"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"class A extends UIElement {\n\n    checkShow(locale) {\n        return true;        // runnable if return value is true\n    }\n\n    [SUBSCRIBE('setLocale') + IF(\"checkShow\")] (locale) {\n        console.log(locale);\n    }\n}\n")),(0,r.kt)("h3",{id:"trigger"},"trigger"),(0,r.kt)("p",null,"The trigger method allows you to execute an event defined on the object itself. Messages sent by trigger are not propagated elsewhere."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"this.trigger('setLocale', 'en')  // setLocale message is run only on self instance \n")),(0,r.kt)("p",null,"If you want to send a message only to the parent object, you can do the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"this.parent.trigger('setLocale', 'en'); \n")),(0,r.kt)("h3",{id:"subscribe_self"},"SUBSCRIBE_SELF"),(0,r.kt)("p",null,"It can only be called with the trigger function. (How to trigger my own event)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"class A extends UIElement {\n    [SUBSCRIBE_SELF('setLocale')] (locale) {\n        console.log(locale);\n    }\n}\n")))}g.isMDXComponent=!0}}]);